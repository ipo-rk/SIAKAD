<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard Guru - SIAKAD</title>

    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Load script.js early to access auth functions -->
    <script src="assets/js/script.js"></script>

    <!-- AUTH CHECK - MUST LOGIN FIRST (From script.js) -->
    <script>
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function () {
                checkAuthBeforePageLoad('guru');
            });
        } else {
            checkAuthBeforePageLoad('guru');
        }
    </script>

</head>

<body class="font-sans text-slate-800">

    <!-- Topbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container-fluid px-4">
            <div class="d-flex align-items-center">
                <button id="toggleSidebar" class="btn btn-light me-2 d-lg-none"><i class="fa fa-bars"></i></button>
                <a class="navbar-brand fw-bold" href="#">SIAKAD — Guru</a>
                <small class="text-muted ms-3 d-none d-md-inline">SMP YPPGI Bomou</small>
            </div>

            <div class="d-flex align-items-center ms-auto gap-3">
                <div class="dropdown">
                    <a href="#" id="dropdownAvatarToggle"
                        class="d-flex align-items-center text-decoration-none position-relative dropdown-toggle"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <img id="userAvatar" src="https://ui-avatars.com/api/?name=Siswa&background=10b981&color=fff"
                            alt="avatar" class="rounded-circle" width="36" height="36">
                        <!-- <span id="avatarEditBtn"
                            class="btn btn-sm btn-light position-absolute p-0 border avatar-edit-btn"
                            title="Ganti Avatar" aria-label="Ganti Avatar"
                            style="width:20px;height:20px;right:-6px;bottom:-6px;">
                            <i class="fa fa-pen" style="font-size:10px;"></i> -->
                        </span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><span class="dropdown-item disabled" id="userName">Siswa</span></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#" id="changeAvatarBtn">Ganti Avatar</a></li>
                        <li><a class="dropdown-item" href="#" onclick="editProfile()">Edit Profil</a></li>
                        <li><a class="dropdown-item text-danger" href="#" onclick="logout()">Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="d-flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar bg-white border-end d-none d-lg-block p-4">
            <div class="mb-4">
                <h5 class="fw-bold">Menu Guru</h5>
                <p class="text-muted small">Tahun Akademik 2024/2025</p>
            </div>

            <nav class="nav flex-column gap-1">
                <a class="nav-link px-3 py-2 d-flex align-items-center" href="#" data-section="dashboard"><i
                        class="fa fa-home me-3"></i>Dashboard</a>
                <a class="nav-link px-3 py-2 d-flex align-items-center" href="#" data-section="jadwal"><i
                        class="fa fa-calendar-week me-3"></i>Jadwal Mengajar</a>
                <a class="nav-link px-3 py-2 d-flex align-items-center" href="#" data-section="absensi"><i
                        class="fa fa-check me-3"></i>Absensi Kelas</a>
                <a class="nav-link px-3 py-2 d-flex align-items-center" href="#" data-section="input-nilai"><i
                        class="fa fa-pen me-3"></i>Input Nilai</a>
                <a class="nav-link px-3 py-2 d-flex align-items-center" href="#" data-section="nilai"><i
                        class="fa fa-chart-bar me-3"></i>Rekap Nilai</a>
                <a class="nav-link px-3 py-2 d-flex align-items-center" href="#" data-section="profil"><i
                        class="fa fa-user me-3"></i>Profil Saya</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4">

            <!-- Dashboard Section -->
            <section id="section-dashboard">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                    <!-- Left Column -->
                    <div class="lg:col-span-2">
                        <!-- Summary Cards -->
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4">
                            <div class="app-card p-4">
                                <h6 class="text-muted mb-1">Kelas Mengajar</h6>
                                <h3>3</h3>
                                <small>VIII A, VIII B, IX A</small>
                            </div>

                            <div class="app-card p-4">
                                <h6 class="text-muted mb-1">Total Siswa</h6>
                                <h3>87</h3>
                                <small>Dari 3 kelas</small>
                            </div>

                            <div class="app-card p-4">
                                <h6 class="text-muted mb-1">Mata Pelajaran</h6>
                                <h3>1</h3>
                                <small>Matematika</small>
                            </div>
                        </div>

                        <!-- Jadwal Mengajar Hari Ini -->
                        <div class="app-card p-4 mb-4">
                            <h5 class="mb-3">Jadwal Mengajar Hari Ini</h5>
                            <div class="list-group">
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>07:00 - 08:30</strong> — Kelas VIII A
                                        </div>
                                        <small class="text-muted">Ruang 101</small>
                                    </div>
                                </div>
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>08:30 - 10:00</strong> — Kelas VIII B
                                        </div>
                                        <small class="text-muted">Ruang 102</small>
                                    </div>
                                </div>
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>10:30 - 12:00</strong> — Kelas IX A
                                        </div>
                                        <small class="text-muted">Ruang 201</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Daftar Kelas -->
                        <div class="app-card p-4">
                            <h5 class="mb-3">Daftar Kelas yang Diajar</h5>
                            <div class="table-responsive">
                                <table class="table table-sm mb-0">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Kelas</th>
                                            <th>Jumlah Siswa</th>
                                            <th>Nilai Rata-rata</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>VIII A</td>
                                            <td>28</td>
                                            <td>8.3</td>
                                            <td><a href="#" class="btn btn-sm btn-outline-primary">Input Nilai</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>VIII B</td>
                                            <td>30</td>
                                            <td>8.1</td>
                                            <td><a href="#" class="btn btn-sm btn-outline-primary">Input Nilai</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>IX A</td>
                                            <td>29</td>
                                            <td>8.4</td>
                                            <td><a href="#" class="btn btn-sm btn-outline-primary">Input Nilai</a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div>
                        <!-- Info Cepat -->
                        <div class="app-card p-4 mb-4">
                            <h6>Informasi Penting</h6>
                            <ul class="list-unstyled mt-3">
                                <li class="mb-3 pb-3 border-bottom">
                                    <i class="fa fa-bell text-warning me-2"></i>
                                    <small>Pengumpulan nilai akhir semester minggu depan</small>
                                </li>
                                <li class="mb-3 pb-3 border-bottom">
                                    <i class="fa fa-calendar text-info me-2"></i>
                                    <small>Ujian susulan: 20-25 Januari</small>
                                </li>
                                <li>
                                    <i class="fa fa-users text-success me-2"></i>
                                    <small>Rapat guru: Jumat 10:00</small>
                                </li>
                            </ul>
                        </div>

                        <!-- Statistik Input Nilai -->
                        <div class="app-card p-4">
                            <h6>Status Input Nilai</h6>
                            <div class="mt-3">
                                <p class="mb-2">
                                    Kelas VIII A:
                                    <strong class="float-end text-success">100%</strong>
                                </p>
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 100%"></div>
                                </div>

                                <p class="mb-2">
                                    Kelas VIII B:
                                    <strong class="float-end text-warning">75%</strong>
                                </p>
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar bg-warning" style="width: 75%"></div>
                                </div>

                                <p class="mb-2">
                                    Kelas IX A:
                                    <strong class="float-end text-success">100%</strong>
                                </p>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Jadwal Mengajar Section -->
            <section id="section-jadwal" class="d-none">
                <h4 class="mb-4">Jadwal Mengajar</h4>
                <div class="app-card p-4">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Hari</th>
                                    <th>Jam</th>
                                    <th>Kelas</th>
                                    <th>Ruang</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Senin</td>
                                    <td>07:00-08:30</td>
                                    <td>VIII A</td>
                                    <td>101</td>
                                </tr>
                                <tr>
                                    <td>Senin</td>
                                    <td>08:30-10:00</td>
                                    <td>VIII B</td>
                                    <td>102</td>
                                </tr>
                                <tr>
                                    <td>Selasa</td>
                                    <td>07:00-08:30</td>
                                    <td>IX A</td>
                                    <td>201</td>
                                </tr>
                                <tr>
                                    <td>Selasa</td>
                                    <td>10:30-12:00</td>
                                    <td>VIII A</td>
                                    <td>101</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Absensi Kelas Section -->
            <section id="section-absensi" class="d-none">
                <h4 class="mb-4">Absensi Kelas</h4>
                <div class="app-card p-4">
                    <div class="mb-3">
                        <label class="form-label">Pilih Kelas:</label>
                        <select class="form-select">
                            <option>VIII A</option>
                            <option>VIII B</option>
                            <option>IX A</option>
                        </select>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>No</th>
                                    <th>NIS</th>
                                    <th>Nama Siswa</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>2025001</td>
                                    <td>Yulianus Tebai</td>
                                    <td>
                                        <select class="form-select form-select-sm">
                                            <option>Hadir</option>
                                            <option>Sakit</option>
                                            <option>Izin</option>
                                            <option>Alfa</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>2025002</td>
                                    <td>Maria Dogopia</td>
                                    <td>
                                        <select class="form-select form-select-sm">
                                            <option>Hadir</option>
                                            <option>Sakit</option>
                                            <option>Izin</option>
                                            <option>Alfa</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3 text-end">
                        <button class="btn btn-primary">Simpan Absensi</button>
                    </div>
                </div>
            </section>

            <!-- Input Nilai Section -->
            <section id="section-input-nilai" class="d-none">
                <h4 class="mb-4">Input Nilai</h4>
                <div class="app-card p-4">
                    <form onsubmit="event.preventDefault(); alert('Mock: Nilai disimpan')">
                        <div class="row g-3 mb-4">
                            <div class="col-md-4">
                                <label class="form-label">Kelas</label>
                                <select class="form-select">
                                    <option>VIII A</option>
                                    <option>VIII B</option>
                                    <option>IX A</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Semester</label>
                                <select class="form-select">
                                    <option>Semester 1</option>
                                    <option>Semester 2</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">&nbsp;</label>
                                <button type="button" class="btn btn-primary w-100">Tampilkan Data Siswa</button>
                            </div>
                        </div>
                    </form>

                    <div class="table-responsive mt-4">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>NIS</th>
                                    <th>Nama</th>
                                    <th>Nilai Harian</th>
                                    <th>UTS</th>
                                    <th>UAS</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025001</td>
                                    <td>Yulianus Tebai</td>
                                    <td><input type="number" class="form-control form-control-sm" min="0" max="100"
                                            value="85"></td>
                                    <td><input type="number" class="form-control form-control-sm" min="0" max="100"
                                            value="82"></td>
                                    <td><input type="number" class="form-control form-control-sm" min="0" max="100"
                                            value="88"></td>
                                </tr>
                                <tr>
                                    <td>2025002</td>
                                    <td>Maria Dogopia</td>
                                    <td><input type="number" class="form-control form-control-sm" min="0" max="100"
                                            value="80"></td>
                                    <td><input type="number" class="form-control form-control-sm" min="0" max="100"
                                            value="78"></td>
                                    <td><input type="number" class="form-control form-control-sm" min="0" max="100"
                                            value="85"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3 text-end">
                        <button class="btn btn-success">Simpan Nilai</button>
                    </div>
                </div>
            </section>

            <!-- Rekap Nilai Section -->
            <section id="section-nilai" class="d-none">
                <h4 class="mb-4">Rekap Nilai</h4>
                <div class="app-card p-4">
                    <div class="mb-3">
                        <label class="form-label">Pilih Kelas:</label>
                        <select class="form-select w-auto">
                            <option>VIII A</option>
                            <option>VIII B</option>
                            <option>IX A</option>
                        </select>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover table-sm">
                            <thead class="table-light">
                                <tr>
                                    <th>NIS</th>
                                    <th>Nama</th>
                                    <th>Harian</th>
                                    <th>UTS</th>
                                    <th>UAS</th>
                                    <th>Rata-rata</th>
                                    <th>Grade</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025001</td>
                                    <td>Yulianus Tebai</td>
                                    <td>85</td>
                                    <td>82</td>
                                    <td>88</td>
                                    <td><strong>85</strong></td>
                                    <td><span class="badge bg-success">A</span></td>
                                </tr>
                                <tr>
                                    <td>2025002</td>
                                    <td>Maria Dogopia</td>
                                    <td>80</td>
                                    <td>78</td>
                                    <td>85</td>
                                    <td><strong>81</strong></td>
                                    <td><span class="badge bg-success">A</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Profil Section -->
            <section id="section-profil" class="d-none">
                <h4 class="mb-4">Profil Saya</h4>
                <div class="app-card p-4">
                    <div class="row">
                        <div class="col-md-3 text-center mb-4">
                            <img id="profilFoto" src="https://ui-avatars.com/api/?name=Guru&background=f59e0b&color=fff"
                                class="rounded-circle mb-3" style="width: 150px; height: 150px;">
                        </div>
                        <div class="col-md-9">
                            <div class="mb-3">
                                <label class="form-label">Nama Lengkap</label>
                                <input type="text" class="form-control" id="profilNama" value="Bpk. D. Wonda" disabled>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label">NIP</label>
                                    <input type="text" class="form-control" value="19750315199401001" disabled>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Mata Pelajaran</label>
                                    <input type="text" class="form-control" value="Matematika" disabled>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Status</label>
                                    <input type="text" class="form-control" value="PNS" disabled>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <label class="form-label">Telepon</label>
                                    <input type="text" class="form-control" value="081234567890" disabled>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Email</label>
                                    <input type="text" class="form-control" value="guru@siakad.local" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/script.js"></script>
    <script src="assets/js/guru.js"></script>

</body>

</html>